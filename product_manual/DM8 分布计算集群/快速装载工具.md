

# 快速装载工具

达梦快速装载工具 dmfldr（DM Fast Loader）是 DM 提供的快速数据装载命令行工具。用户通过使用 dmfldr 工具能够把按照一定格式排序的文本数据以简单、快速、高效的方式载入到 DM 数据库中，或把 DM 数据库中的数据按照一定格式写入文本文件。

达梦快速装载工具具备向多个子表并发同时导入的特性，装载效率很高。

当用户使用 dmfldr 向 DMDPC 系统装载数据时，需要指定 dmfldr 的连接串为连接 SP 服务器的连接串。由于 SP 并不存放用户关系表真实数据，数据实际存储于 BP 站点，因此 dmfldr 实际发送数据是需要发往 BP 站点。然而 SP 服务器并不知晓装载表存储在哪些 BP 站点，表的 BP 站点信息由 MP 服务器管理，因此 SP 需要向 MP 请求查询装载表的 BP 信息，然后将 BP 信息转发给 dmfldr 客户端，dmfldr 客户端解析消息后可获取到装载表的 BP 信息，直接连接到各个 BP 站点服务器，将数据发往各个 BP 站点。

dmfldr 在 DMDPC 环境下的装载流程为：

  1. 用户提出装载需求，使用 dmfldr 向 DMDPC 系统装载数据；
  2. dmfldr 向 SP 发送请求，请求获取装载表的 BP 服务器站点信息；
  3. SP 向 MP 发送请求，请求获取装载表的 BP 服务器站点信息；
  4. MP 根据 SP 的请求，在 MP 站点上查询系统表，收集待装载表所涉及的所有 BP 站点信息，并将这些 BP 站点信息全部返回给 SP；
  5. SP 将 BP 站点信息返回给 dmfldr；
  6. dmfldr 得到表的 BP 站点信息后，首先与各个 BP 分别建立连接，然后将所有数据发往各自 BP 站点，再分别进行装载。



在 DMDPC 架构中，dmfldr 装载流程如下图所示。

![图 9.1 dmfldr 装载框架示意图.png](https://eco.dameng.com/eco-file-server/file/eco/preview/20221128150125I729RQ5YU4BZ2SDKUP)

图9.1 dmfldr装载框架示意图

例 在 Windows 环境下，向 SP 在 192.168.0.40 的数据库进行数据装载。

```
dmfldr.exe SYSDBA/*****@192.168.0.40:5238 control='d:\t1.ctl'
```

关于 dmfldr 工具的具体使用方法和控制文件 control 的详细介绍请参考手册《DM8_dmfldr 使用手册》。
