

# 创建用户关联表空间

## 一、新建用户

使用 SYSDBA 用户登录 DM 管理工具。

展开用户模块，右键管理用户，点击【新建用户】，如下图所示：

![右键表空间模块，点击新建表空间](https://download.dameng.com/eco/docs/asset/start/creata_user.jpg)

## 二、用户名、密码

设置用户名、密码，如下图所示：

![用户名、密码](https://download.dameng.com/eco/docs/asset/start/user_name.png)

> **注意**
>
> 密码默认长度不少于 9 位。



## 三、定义表空间、索引表空间

表空间、索引表空间配置完成后，点击【确定】即可创建完成用户关联表空间，如下图所示：

![表空间、索引表空间](https://download.dameng.com/eco/docs/asset/start/user_tablespacename.png)

使用命令行方式创建用户 TEST ，密码 “Dameng@123”，使用散列算法 SHA512 ，使用存储加密密钥为 “123456”，指定表空间为 TEST，索引表空间为 TEST，授予 “PUBLIC” 和 “SOI” 权限。示例参考如下：

```
create user "TEST" identified by "Dameng@123" hash with SHA512 salt
encrypt by "123456"
default tablespace "TEST"
default index tablespace "TEST";

grant "PUBLIC","SOI" to "TEST";
```

更多详细用户管理 SQL 语法可参考数据库安装目录下 doc 目录中《DM8_SQL 语言使用手册》。


# 授予权限

## 一、授予用户 DBA 权限

![授予权限](https://download.dameng.com/eco/docs/asset/start/user_quanxianDBAa.png)

命令行方式参考如下：

```
grant "DBA" to "TEST";
```

## 二、授予用户 RESOURCE 权限，其余权限可根据需要自行选择权限

![授予权限](https://download.dameng.com/eco/docs/asset/start/user_quanxianRESOURSEe.png)

命令行方式参考如下：

```
grant "RESOURCE" to "TEST";
```

更多详细用户权限管理 SQL 语法可参考数据库安装目录下 doc 目录中《DM8 安全管理》手册。


# 用户与模式的关系

每个用户有一个默认的同名的模式，访问自己模式下的表、视图等，不需要加模式名，访问其他模式下的对象需要拥有访问权限，访问时还需加上模式名。

## 一、查询当前用户模式下的表，无需加对象名

以 TEST 用户为例，当查询自己模式下得表时，可以直接进行查询，无需加对象名，如下图所示：

```
select * from test
```

![右键表空间模块，点击新建表空间](https://download.dameng.com/eco/docs/asset/start/selecttestsa.png)

## 二、查询其他用户模式下的表，需要加对象名

以 TEST 用户为例，查询 DBTEST 用户模式下的表 TABLE_TEST，如不加对象名，则查询会报错“无效的表名或者视图名[TABLE_TEST]”，如下图所示：

```
select * from TABLE_TEST;
```

![image.png](https://eco.dameng.com/eco-file-server/file/eco/preview/2024061311070457BNY3AD3M41056G4O)

加上对象名后，没有授予查询权限，则查询会报错“没有对象[DBTEST.TABLE_TEST]的查询权限”，如下图所示：

```
select * from DBTEST.TABLE_TEST;
```

![image.png](https://eco.dameng.com/eco-file-server/file/eco/preview/20240613110901XQDYSONCY9GGRSCS5Q)

这时需要授予 TEST 用户查询表 TABLE_TEST 的权限，如下图所示：

```
--使用 root 用户授予 TEST 用户查询表 TABLE_TEST 的权限
grant SELECT on "DBTEST"."TABLE_TEST" to "TEST";
--使用 TEST 用户登录数据库查询表 TABLE_TEST
select * from DBTEST.TABLE_TEST;
```

![image.png](https://eco.dameng.com/eco-file-server/file/eco/preview/20240613111353CR9J2ZRSQFFP0EAVWL)
