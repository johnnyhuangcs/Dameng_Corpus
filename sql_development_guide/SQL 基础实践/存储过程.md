

# 存储过程

本章节主要介绍在 DM 数据库中存储过程的使用。

## 适用场景

|**软件**|**版本**|
|--|--|
|操作系统|Redhat 7 及以上版本|
|DM 数据库|DM 8.0 及以上版本|
|CPU 架构|x86、ARM、龙芯、飞腾等国内外主流 CPU|


## 操作方法

### 存储过程创建与使用

存储过程（Stored Procedure）是在大型数据库系统中，一组为了完成特定功能的SQL语句集，它存储在数据库中，一次编译后永久有效，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。存储过程是数据库中的一个重要对象。在数据量特别庞大的情况下利用存储过程能达到倍速的效率提升。

  * 创建带参数存储过程。如下所示：



```
//创建测试表 test_tab
create table test_tab (id int primary key, name varchar(30));
//创建有参数存储过程 p_test
create or replace procedure p_test(i in int)
as j int;
begin
for j in 1 ..i loop
insert into test_tab values(j,'p_test'||j);
end loop;
end;
```

执行调用过程。如下所示：

```
p_test(3);
//对表 test_tab 进行查询
select * from test_tab;
```

输出结果：

![存储过程](https://download.dameng.com/eco/docs/asset/sql-dev/pro-1.png)

  * 创建无参数存储过程。如下所示：



```
//创建无参数存储过程 p_test2
create or replace procedure p_test2 as j int;
begin
for j in 10 ..13 loop
insert into test_tab values(j,'p_test2:'||j);
end loop;
end;
```

执行调用过程。如下所示：

```
p_test2;
//对表 test_tab 进行查询
select * from test_tab;
```

输出结果：

![存储过程](https://download.dameng.com/eco/docs/asset/sql-dev/pro-2.png)

> **注意**



## 参考文献

更多 SQL 语言使用说明，请参考《DM_SQL 语言使用手册》，手册位于数据库安装路径 `/dmdbms/doc` 文件夹下。如有其他问题，请在社区内咨询。
